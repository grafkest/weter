# Weter Website

Готовое веб-приложение для провайдера интернета и видеонаблюдения «Weter». Проект включает публичный сайт с ключевыми страницами, формами заявок и панель администратора для редактирования контента без правки кода.

## Стэк
- Python 3.12
- Flask 3 + SQLAlchemy
- SQLite (по умолчанию)
- Flask-Migrate для миграций
- Адаптивная верстка на HTML/CSS (mobile-first)

## Быстрый старт

### Предварительные требования
- [Python 3.12](https://www.python.org/downloads/) (при установке на Windows отметьте пункт «Add python.exe to PATH»).
- Git (если планируете клонировать репозиторий из удалённого источника).

После установки Python перезапустите терминал/PowerShell, чтобы обновились переменные окружения.

### 1. Создайте и активируйте виртуальное окружение
- **macOS / Linux**
  ```bash
  python -m venv .venv
  source .venv/bin/activate
  ```
- **Windows (PowerShell)**
  ```powershell
  py -3.12 -m venv .venv
  .\.venv\Scripts\Activate.ps1
  ```
  > Если появляется сообщение об ограничении выполнения скриптов, временно разрешите его командой
  > `Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass` и повторите активацию.

### 2. Установите зависимости
- **macOS / Linux**
  ```bash
  pip install -r requirements.txt
  ```
- **Windows (PowerShell)**
  ```powershell
  py -m pip install -r requirements.txt
  ```

### 2.1. Частые вопросы в PowerShell
- Проверьте, что Python установлен и доступен командой `py --version`. Если команда не найдена, переустановите Python и отметьте пункт «Add python.exe to PATH».
- Убедитесь, что вы находитесь в директории проекта перед выполнением команд (например, `cd C:\Users\Имя\Downloads\weter`).
- Если PowerShell пишет, что файл `Activate` не найден, используйте полный путь `.\.venv\Scripts\Activate.ps1`.
- При сообщении «pip не является командлетом» запускайте установку зависимостей через `py -m pip ...`. При необходимости восстановите pip: `py -m ensurepip --upgrade` и затем `py -m pip install --upgrade pip`.

### 3. Примените миграции и заполните базу демо-данными
```bash
flask --app app:create_app db upgrade
flask --app app:create_app create-defaults
```
> На Windows можно запускать команды через `py -m flask --app app:create_app ...`, если `flask` не найден в PATH.

### 4. Запустите сервер разработки
- **macOS / Linux**
  ```bash
  flask --app app:create_app run --debug
  ```
- **Windows (PowerShell)**
  ```powershell
  py -m flask --app app:create_app run --debug
  ```

Команда должна выполняться в активированном виртуальном окружении. Оставьте окно терминала открытым — пока сервер работает, сайт
будет доступен по адресу `http://127.0.0.1:5000/`. Если после шагов 1–3 страница не открывается, запустите сервер по инструкции
выше и попробуйте обновить вкладку браузера.

## Панель администратора
- URL: `http://127.0.0.1:5000/admin`
- Логин: `admin`
- Пароль: `change-me`

Значения можно переопределить переменными окружения `ADMIN_USERNAME` и `ADMIN_PASSWORD`. Секретный ключ Flask задаётся переменной `SECRET_KEY`.

### Возможности администратора
- Редактирование текста и ссылок в герой-секции главной страницы.
- Управление списком услуг (категории «Интернет» и «Видеонаблюдение»).
- Создание и правка тарифов интернета.
- Управление комплектами видеонаблюдения.
- Добавление преимуществ для разных страниц сайта.
- Создание, изменение и удаление отзывов клиентов.

Все формы защищены CSRF-токенами, изменения сохраняются в базе данных.

## Публичные страницы
- **Главная** — краткое описание услуг, форма проверки адреса, отзывы.
- **Интернет** — тарифы, преимущества и CTA на заявку.
- **Видеонаблюдение** — комплекты, преимущества и форма консультации.
- **О компании** — миссия, преимущества, команда.
- **Контакты** — контактные данные, карта, форма обратной связи.

## Формы и заявки
Отправленные формы сохраняются в базе для последующей обработки:
- Проверка доступности (`AvailabilityRequest`).
- Запрос консультации по видеонаблюдению (`ConsultationRequest`).
- Обратная связь (`ContactSubmission`).

## Миграции
Миграции созданы с помощью `Flask-Migrate`. При изменении моделей выполните:
```bash
flask --app app:create_app db migrate -m "Описание изменений"
flask --app app:create_app db upgrade
```

## Переменные окружения
| Переменная | Назначение | Значение по умолчанию |
|------------|------------|------------------------|
| `DATABASE_URL` | строка подключения к БД | `sqlite:///instance/weter.db` |
| `SECRET_KEY` | секретный ключ Flask | `dev-secret-key` |
| `ADMIN_USERNAME` | логин администратора | `admin` |
| `ADMIN_PASSWORD` | пароль администратора | `change-me` |

## Лицензия
Проект предоставляется «как есть». Используйте и модифицируйте под свои задачи.
